<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Intranet EnvÃ­os</title>

  <!-- ===========================
       CSS â€“ ESTILOS GENERALES
       =========================== -->
  <!-- AquÃ­ SOLO van estilos visuales -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- ===========================
       TOPBAR â€“ BARRA SUPERIOR
       =========================== -->
  <!-- Contiene saludo y botÃ³n cerrar sesiÃ³n -->
  <header id="topbar">
    <div class="topbar-left">
      <span id="saludoUsuario">ðŸ‘‹ Bienvenido</span>
    </div>

    <div class="topbar-right">
      <button id="logoutBtn" class="logout-btn">
        ðŸ”’ Cerrar sesiÃ³n
      </button>
    </div>
  </header>

  <!-- ===========================
       CONTENEDOR PRINCIPAL
       =========================== -->
  <!-- AquÃ­ luego irÃ¡ el mapa SVG -->
  <main id="app">

    <!-- CONTENEDOR DEL MAPA -->
    <div id="mapa">
      <!-- AQUÃ PEGAREMOS EL SVG MÃS ADELANTE -->
    </div>

  </main>

  <!-- ===========================
       JS â€“ SEGURIDAD / SESIÃ“N
       =========================== -->
  <script>
    // Verifica que exista sesiÃ³n
    const sessionId = localStorage.getItem("sessionId");

    if (!sessionId) {
      // Si no hay sesiÃ³n, regresa al login
      window.location.href = "/IntraNetEX/index.html";
    }
  </script>

  <!-- ===========================
       JS â€“ SALUDO DINÃMICO
       =========================== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const saludo = document.getElementById("saludoUsuario");
      const nombre = localStorage.getItem("nombre");
      const rol = localStorage.getItem("rol");

      if (nombre) {
        saludo.textContent = `ðŸ‘‹ Bienvenido ${nombre}`;
      } else if (rol) {
        saludo.textContent = `ðŸ‘‹ Bienvenido ${rol}`;
      } else {
        saludo.textContent = "ðŸ‘‹ Bienvenido";
      }
    });
  </script>

  <!-- ===========================
       JS â€“ CERRAR SESIÃ“N
       =========================== -->
  <script>
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("sessionId");
      localStorage.removeItem("rol");
      localStorage.removeItem("nombre");
      window.location.href = "/IntraNetEX/index.html";
    });
  </script>

</body>
</html>
